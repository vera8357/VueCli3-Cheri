(function(e){function t(t){for(var c,a,u=t[0],i=t[1],s=t[2],d=0,l=[];d<u.length;d++)a=u[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);p&&p(t);while(l.length)l.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(c=!1)}c&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var c={},a={app:0},o={app:0},r=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-0dcdc4de":"8bc3dadc","chunk-1fb3d7ae":"f8eb182d","chunk-2d0bd8f0":"db1934fd","chunk-337a6609":"a4df881f","chunk-4cd913fa":"1c320084","chunk-5a4e8a06":"f50fd4e8","chunk-68d62788":"b9229b74","chunk-6e2f7cc3":"bd0b1590","chunk-812af7b6":"c3784107","chunk-9ef0c7d4":"69b84391","chunk-a495e22e":"f6794b19","chunk-b5f11fa8":"34b096d7"}[e]+".js"}function i(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-0dcdc4de":1,"chunk-1fb3d7ae":1,"chunk-337a6609":1,"chunk-4cd913fa":1,"chunk-5a4e8a06":1,"chunk-68d62788":1,"chunk-6e2f7cc3":1,"chunk-812af7b6":1,"chunk-9ef0c7d4":1,"chunk-a495e22e":1,"chunk-b5f11fa8":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var c="css/"+({}[e]||e)+"."+{"chunk-0dcdc4de":"e73526bc","chunk-1fb3d7ae":"95fb393c","chunk-2d0bd8f0":"31d6cfe0","chunk-337a6609":"9bf3c4b7","chunk-4cd913fa":"faf512cb","chunk-5a4e8a06":"1baeab13","chunk-68d62788":"29fe83e9","chunk-6e2f7cc3":"25c0f577","chunk-812af7b6":"ca6e53bd","chunk-9ef0c7d4":"2c8d9586","chunk-a495e22e":"7c7d745b","chunk-b5f11fa8":"8c322604"}[e]+".css",o=i.p+c,r=document.getElementsByTagName("link"),u=0;u<r.length;u++){var s=r[u],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===c||d===o))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){s=l[u],d=s.getAttribute("data-href");if(d===c||d===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var c=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=c,delete a[e],p.parentNode.removeChild(p),n(r)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){a[e]=0})));var c=o[e];if(0!==c)if(c)t.push(c[2]);else{var r=new Promise((function(t,n){c=o[e]=[t,n]}));t.push(c[2]=r);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=u(e);var l=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var c=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+c+": "+a+")",l.name="ChunkLoadError",l.type=c,l.request=a,n[1](l)}o[e]=void 0}};var p=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=c,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)i.d(n,c,function(t){return e[t]}.bind(null,c));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/VueCli3-Cheri/dist/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=d;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var c=n("2b0e"),a=n("bc3a"),o=n.n(a),r=n("a7fe"),u=n.n(r),i=n("2f62"),s=n("9062"),d=n.n(s),l=n("7bb1"),p=n("427f"),f=n.n(p),h=n("a925"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},g=[],b=(n("5c0b"),n("2877")),v={},k=Object(b["a"])(v,m,g,!1,null,null,null),P=k.exports,S=n("8c4f");c["a"].use(S["a"]);var O=new S["a"]({routes:[{path:"*",redirect:"/"},{name:"Index",path:"/",component:function(){return n.e("chunk-b5f11fa8").then(n.bind(null,"d504"))},children:[{name:"Home",path:"",component:function(){return n.e("chunk-812af7b6").then(n.bind(null,"bb51"))}},{name:"Product",path:"productList",component:function(){return n.e("chunk-4cd913fa").then(n.bind(null,"e6dc"))}},{name:"ProductInfo",path:"product/:id",component:function(){return n.e("chunk-1fb3d7ae").then(n.bind(null,"41f6"))}},{name:"Discount",path:"discount",component:function(){return n.e("chunk-68d62788").then(n.bind(null,"ab58"))}},{name:"CheckOut",path:"CheckOut",component:function(){return n.e("chunk-0dcdc4de").then(n.bind(null,"da3a"))}},{name:"comfirmOrder",path:"comfirm_order/:id",component:function(){return n.e("chunk-2d0bd8f0").then(n.bind(null,"2d08"))}}]},{name:"Login",path:"/login",component:function(){return n.e("chunk-a495e22e").then(n.bind(null,"676a"))}},{name:"Admin",path:"/admin",component:function(){return n.e("chunk-9ef0c7d4").then(n.bind(null,"5bac"))},meta:{requiredUser:!0},children:[{name:"Products",path:"products",component:function(){return n.e("chunk-5a4e8a06").then(n.bind(null,"d416"))},meta:{requiredUser:!0}},{name:"orders",path:"orders",component:function(){return n.e("chunk-337a6609").then(n.bind(null,"5651"))},meta:{requiredUser:!0}},{name:"coupons",path:"coupons",component:function(){return n.e("chunk-6e2f7cc3").then(n.bind(null,"d0a3"))},meta:{requiredUser:!0}}]}]}),E=(n("ac6a"),n("1157")),C=n.n(E),I={namespaced:!0,state:{products:{},pagination:{},tempProduct:{},isNew:!1,delProduct:{},upFileLoading:!1},actions:{getProducts:function(e,t){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheri","/admin/products?page=").concat(t);e.commit("ISLOADING",!0,{root:!0}),o.a.get(n).then((function(t){t.data.success&&(e.commit("PRODUCTS",t.data.products),e.commit("PAGINATION",t.data.pagination),e.commit("ISLOADING",!1,{root:!0}))}))},updatetemproduct:function(e,t){var n=t.isNew,c=t.item;if(C()("#productModal").modal("show"),n)e.commit("ISNEW",n);else{var a=Object.assign({},c);e.commit("ISNEW",n),e.commit("TEMPPRODUCT",a)}},updatedProduct:function(e){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheri","/admin/product"),n="post";e.state.isNew||(t="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheri","/admin/product/").concat(e.state.tempProduct.id),n="put"),o.a[n](t,{data:e.state.tempProduct}).then((function(t){t.data.success&&(C()("#productModal").modal("hide"),e.dispatch("getProducts"))}))},openDelModal:function(e,t){t=Object.assign({},t),e.commit("DELPRODUCT",t),C()("#delModal").modal("show")},deleteProduct:function(e,t){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheri","/admin/product/").concat(t);o.a.delete(n).then((function(t){t.data.success&&(C()("#delModal").modal("hide"),e.dispatch("getProducts"))}))},uploadFile:function(e,t){var n=new FormData;n.append("file-to-upload",t);var c="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheri","/admin/upload");e.commit("UPFILELOADING",!0),o.a.post(c,n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){if(t.data.success)e.commit("TEMPPRODUCT",t.data.imageUrl),e.commit("UPFILELOADING",!1);else{var n="圖檔錯誤",c="success";e.commit("UPFILELOADING",!1),e.dispatch("updateMessage",{message:n,status:c})}}))}},mutations:{PRODUCTS:function(e,t){e.products=t},PAGINATION:function(e,t){e.pagination=t},TEMPPRODUCT:function(e,t){"string"===typeof t?e.tempProduct.imageUrl=t:e.tempProduct=t},ISNEW:function(e,t){e.isNew=t},DELPRODUCT:function(e,t){e.delProduct=t},UPFILELOADING:function(e,t){e.upFileLoading=t}},getters:{products:function(e){return e.products},pagination:function(e){return e.pagination},tempProduct:function(e){return e.tempProduct},isNew:function(e){return e.isNew},delProduct:function(e){return e.delProduct},upFileLoading:function(e){return e.upFileLoading}}};c["a"].use(i["a"]);var w=new i["a"].Store({strict:!0,state:{isLoading:!1,messages:[],shopingCart:[],collect:[]},actions:{updateLoading:function(e,t){e.commit("ISLOADING",t)},updateMessage:function(e,t){var n=t.message,c=t.status,a=Math.floor(new Date/1e3);e.commit("MESSAGES",{message:n,status:c,timestamp:a}),e.dispatch("removeMessageWithTiming",a)},removeMessageWithTiming:function(e,t){setTimeout((function(){e.state.messages.forEach((function(n,c){n.timestamp===t&&e.commit("MESSAGES",{i:c})}))}),5e3)},removeMessage:function(e,t){e.commit("MESSAGES",{i:t})},getCart:function(e){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheri","/cart");o.a.get(t).then((function(t){e.commit("SHOPINGCART",t.data.data)}))},addToCart:function(e,t){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheri","/cart");o.a.post(n,{data:t}).then((function(t){if(t.data.success){var n="已加入購物車",c="success";e.dispatch("updateMessage",{message:n,status:c}),e.dispatch("getCart")}}))},delProduct:function(e,t){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheri","/cart/").concat(t.id);o.a.delete(n).then((function(t){if(t.data.success){var n="已刪除此商品",c="success";e.dispatch("updateMessage",{message:n,status:c}),e.dispatch("getCart")}}))},collect:function(e){var t=null===localStorage.getItem("like")?[]:JSON.parse(localStorage.getItem("like"));e.commit("COLLECT",t)},updateCollect:function(e,t){var n=t.id,c=t.title,a=null===localStorage.getItem("like")?[]:JSON.parse(localStorage.getItem("like")),o=!1;if(a.forEach((function(e,t){e.id===n&&(o=t)})),!1===o){var r={id:n,title:c};a.push(r)}else a.splice(o,1);localStorage.setItem("like",JSON.stringify(a)),e.dispatch("collect")},delAllCollect:function(e){localStorage.removeItem("like"),e.dispatch("collect")}},mutations:{ISLOADING:function(e,t){e.isLoading=t},MESSAGES:function(e,t){var n=t.message,c=t.status,a=t.timestamp,o=t.i;void 0===o?e.messages.push({message:n,status:c,timestamp:a}):e.messages.splice(o,1)},SHOPINGCART:function(e,t){e.shopingCart=t},COLLECT:function(e,t){e.collect=t}},modules:{adminProductModules:I}}),y=(n("a481"),n("c5f6"),function(e){var t=Number(e);return"$".concat(t.toFixed(0).replace(/./g,(function(e,t,n){var c=t&&"."!==e&&(n.length-t)%3===0?", ".concat(e).replace(/\s/g,""):e;return c})))}),L=(n("6b54"),function(e){var t=e.toString().length,n=new Date(e);t<13&&(n=new Date(1e3*e));var c=n.getFullYear()+"-",a=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-",o=(n.getDate()<10?"0"+n.getDate():n.getDate())+" ",r=(n.getHours()<10?"0"+n.getHours():n.getHours())+":",u=(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes())+":",i=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return c+a+o+r+u+i});n("e40d"),n("4989");c["a"].filter("currency",y),c["a"].filter("changeTime",L),c["a"].component("Loading",d.a),o.a.defaults.withCredentials=!0,c["a"].config.productionTip=!1,c["a"].use(h["a"]),c["a"].use(i["a"]),c["a"].use(u.a,o.a);var N=new h["a"]({locale:"zhTW"});c["a"].use(l["a"],{events:"input|blur",i18n:N,dictionary:{zhTW:f.a}}),new c["a"]({router:O,store:w,i18n:N,render:function(e){return e(P)}}).$mount("#app"),O.beforeEach((function(e,t,n){if(e.meta.requiredUser){var c="".concat("https://vue-course-api.hexschool.io","/api/user/check");o.a.post(c).then((function(e){e.data.success?n():(alert("請重新登入"),n({path:"/login"}))}))}else n()}))},"5c0b":function(e,t,n){"use strict";var c=n("5e27"),a=n.n(c);a.a},"5e27":function(e,t,n){}});
//# sourceMappingURL=app.cfb0e256.js.map