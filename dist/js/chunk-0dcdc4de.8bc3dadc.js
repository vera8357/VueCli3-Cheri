(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dcdc4de"],{"15bd":function(t,e,s){"use strict";var a=s("f7b7"),r=s.n(a);r.a},da3a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 my-4"},[t._m(0),0==t.shopingCart.total?s("div",[s("p",{staticClass:"h4 text-center"},[t._v("購物車內無商品")]),s("p",{staticClass:"text-center"},[s("router-link",{attrs:{to:"/"}},[s("i",{staticClass:"fas fa-long-arrow-alt-left"}),t._v("\n          回到"),s("span",{staticClass:"Kalam-font"},[t._v("cheri")]),t._v("購物\n        ")])],1)]):s("table",{staticClass:"table"},[t._m(1),s("tbody",[t._l(t.shopingCart.carts,(function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.product.title)+"\n            "),e.coupon?s("div",{staticClass:"text-success"},[t._v("已套用優惠卷")]):t._e()]),s("td",[t._v(t._s(e.qty))]),s("td",[t._v(t._s(e.total))]),s("td",{staticClass:"text-center"},[s("i",{staticClass:"fas fa-times",on:{click:function(s){return t.delProduct(e)}}})])])})),s("tr",[s("td"),s("td"),s("td",[t._v("總金額")]),s("td",{staticClass:"text-center"},[t._v(t._s(t.shopingCart.total))])]),s("tr",[s("td",[t._v("使用折價卷")]),s("td",{attrs:{colspan:"3"}},[s("div",{staticClass:"input-group input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入折價卷號碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("套用")])])])])]),t.shopingCart.total!==t.shopingCart.final_total?s("tr",{staticClass:"text-info"},[s("td"),s("td"),s("td",[t._v("折扣價")]),s("td",{staticClass:"text-center"},[t._v(t._s(t.shopingCart.final_total))])]):t._e()],2)])]),0!==t.shopingCart.total?s("div",{staticClass:"col-12 my-4"},[s("hr"),t._m(2),s("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"username"}},[t._v("姓名 Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",id:"username",name:"name",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?s("span",{staticClass:"text-danger"},[t._v("姓名不可為空")]):t._e()]),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"phone"}},[t._v("電話 Phone")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",id:"phone",name:"phone",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("phone")?s("span",{staticClass:"text-danger"},[t._v("電話不可為空")]):t._e()])]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"email"}},[t._v("信箱 Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",attrs:{type:"text",id:"email",name:"email",placeholder:"請輸入信箱"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?s("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"address"}},[t._v("住址 Address")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",id:"address",name:"address",placeholder:"請輸入住址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?s("span",{staticClass:"text-danger"},[t._v("住址不可為空")]):t._e()])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"usermsg"}},[t._v("留言")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"w-100",attrs:{name:"msg",id:"usermsg",cols:"30",rows:"3"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._m(3)])]):t._e()])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-5"},[s("p",{staticClass:"h6 text-muted font-weight-bold"},[t._v("購物車")]),s("p",{staticClass:"h3"},[t._v("SHOPPING CART")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("品名")]),s("th",{attrs:{scope:"col"}},[t._v("數量")]),s("th",{attrs:{scope:"col"}},[t._v("金額")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("刪除")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-5"},[s("p",{staticClass:"h6 text-muted font-weight-bold"},[t._v("客戶資訊")]),s("p",{staticClass:"h3"},[t._v("INFORMATION")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-info px-5"},[t._v("建立訂單")])])}],o={data:function(){return{coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart:function(){this.$store.dispatch("getCart")},delProduct:function(t){this.$store.dispatch("delProduct",t)},createOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheri","/order");t.$validator.validate().then((function(s){if(s)t.$http.post(e,{data:t.form}).then((function(e){if(e.data.success){t.$router.push("/comfirm_order/".concat(e.data.orderId));var s="訂單已建立",a="success";t.$store.dispatch("updateMessage",{message:s,status:a})}}));else{var a="表單輸入有誤，請重填",r="danger";t.$store.dispatch("updateMessage",{message:a,status:r})}}))},addCouponCode:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheri","/coupon"),s={code:t.coupon_code};t.$http.post(e,{data:s}).then((function(e){if(e.data.success)t.getCart();else{var s="找不到此優惠卷",a="danger";t.$store.dispatch("updateMessage",{message:s,status:a})}}))}},computed:{shopingCart:function(){return this.$store.state.shopingCart}},created:function(){this.getCart()}},i=o,n=(s("15bd"),s("2877")),c=Object(n["a"])(i,a,r,!1,null,"584d2a3c",null);e["default"]=c.exports},f7b7:function(t,e,s){}}]);
//# sourceMappingURL=chunk-0dcdc4de.8bc3dadc.js.map